/* @license
 * Copyright (c) 2017, Jeff Hlywa (jhlywa@gmail.com)
 * Released under the BSD license
 * https://github.com/jhlywa/chess.js/blob/master/LICENSE
 */
var Chess=function(r){function e(r){"undefined"==typeof r&&(r=!1),sr=new Array(128),pr={w:B,b:B},cr=j,vr={w:0,b:0},gr=B,hr=0,dr=1,Er=[],_r=[],r||(br={}),u(i())}function n(){t(z)}function t(r,n){"undefined"==typeof n&&(n=!1);var t=r.split(/\s+/),f=t[0],a=0;if(!o(r).valid)return!1;e(n);for(var s=0;s<f.length;s++){var p=f.charAt(s);if("/"===p)a+=8;else if(q(p))a+=parseInt(p,10);else{var c="a">p?j:x;l({type:p.toLowerCase(),color:c},O(a)),a++}}return cr=t[1],t[2].indexOf("K")>-1&&(vr.w|=tr.KSIDE_CASTLE),t[2].indexOf("Q")>-1&&(vr.w|=tr.QSIDE_CASTLE),t[2].indexOf("k")>-1&&(vr.b|=tr.KSIDE_CASTLE),t[2].indexOf("q")>-1&&(vr.b|=tr.QSIDE_CASTLE),gr="-"===t[3]?B:ar[t[3]],hr=parseInt(t[4],10),dr=parseInt(t[5],10),u(i()),!0}function o(r){var e={0:"No errors.",1:"FEN string must contain six space-delimited fields.",2:"6th field (move number) must be a positive integer.",3:"5th field (half move counter) must be a non-negative integer.",4:"4th field (en-passant square) is invalid.",5:"3rd field (castling availability) is invalid.",6:"2nd field (side to move) is invalid.",7:"1st field (piece positions) does not contain 8 '/'-delimited rows.",8:"1st field (piece positions) is invalid [consecutive numbers].",9:"1st field (piece positions) is invalid [invalid piece].",10:"1st field (piece positions) is invalid [row too large].",11:"Illegal en-passant square"},n=r.split(/\s+/);if(6!==n.length)return{valid:!1,error_number:1,error:e[1]};if(isNaN(n[5])||parseInt(n[5],10)<=0)return{valid:!1,error_number:2,error:e[2]};if(isNaN(n[4])||parseInt(n[4],10)<0)return{valid:!1,error_number:3,error:e[3]};if(!/^(-|[abcdefgh][36])$/.test(n[3]))return{valid:!1,error_number:4,error:e[4]};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(n[2]))return{valid:!1,error_number:5,error:e[5]};if(!/^(w|b)$/.test(n[1]))return{valid:!1,error_number:6,error:e[6]};var t=n[0].split("/");if(8!==t.length)return{valid:!1,error_number:7,error:e[7]};for(var o=0;o<t.length;o++){for(var i=0,f=!1,u=0;u<t[o].length;u++)if(isNaN(t[o][u])){if(!/^[prnbqkPRNBQK]$/.test(t[o][u]))return{valid:!1,error_number:9,error:e[9]};i+=1,f=!1}else{if(f)return{valid:!1,error_number:8,error:e[8]};i+=parseInt(t[o][u],10),f=!0}if(8!==i)return{valid:!1,error_number:10,error:e[10]}}return"3"==n[3][1]&&"w"==n[1]||"6"==n[3][1]&&"b"==n[1]?{valid:!1,error_number:11,error:e[11]}:{valid:!0,error_number:0,error:e[0]}}function i(){for(var r=0,e="",n=ar.a8;n<=ar.h1;n++){if(null==sr[n])r++;else{r>0&&(e+=r,r=0);var t=sr[n].color,o=sr[n].type;e+=t===j?o.toUpperCase():o.toLowerCase()}n+1&136&&(r>0&&(e+=r),n!==ar.h1&&(e+="/"),r=0,n+=8)}var i="";vr[j]&tr.KSIDE_CASTLE&&(i+="K"),vr[j]&tr.QSIDE_CASTLE&&(i+="Q"),vr[x]&tr.KSIDE_CASTLE&&(i+="k"),vr[x]&tr.QSIDE_CASTLE&&(i+="q"),i=i||"-";var f=gr===B?"-":O(gr);return[e,cr,i,f,hr,dr].join(" ")}function f(r){for(var e=0;e<r.length;e+=2)"string"==typeof r[e]&&"string"==typeof r[e+1]&&(br[r[e]]=r[e+1]);return br}function u(r){Er.length>0||(r!==z?(br.SetUp="1",br.FEN=r):(delete br.SetUp,delete br.FEN))}function a(r){var e=sr[ar[r]];return e?{type:e.type,color:e.color}:null}function l(r,e){if(!("type"in r&&"color"in r))return!1;if(-1===Z.indexOf(r.type.toLowerCase()))return!1;if(!(e in ar))return!1;var n=ar[e];return r.type==H&&pr[r.color]!=B&&pr[r.color]!=n?!1:(sr[n]={type:r.type,color:r.color},r.type===H&&(pr[r.color]=n),u(i()),!0)}function s(r){var e=a(r);return sr[ar[r]]=null,e&&e.type===H&&(pr[e.color]=B),u(i()),e}function p(r,e,n,t,o){var i={color:cr,from:e,to:n,flags:t,piece:r[e].type};return o&&(i.flags|=tr.PROMOTION,i.promotion=o),r[n]?i.captured=r[n].type:t&tr.EP_CAPTURE&&(i.captured=$),i}function c(r){function e(r,e,n,t,o){if(r[n].type!==$||R(t)!==ur&&R(t)!==or)e.push(p(r,n,t,o));else for(var i=[W,F,G,M],f=0,u=i.length;u>f;f++)e.push(p(r,n,t,o,i[f]))}var n=[],t=cr,o=k(t),i={b:fr,w:ir},f=ar.a8,u=ar.h1,a=!1,l="undefined"!=typeof r&&"legal"in r?r.legal:!0;if("undefined"!=typeof r&&"square"in r){if(!(r.square in ar))return[];f=u=ar[r.square],a=!0}for(var s=f;u>=s;s++)if(136&s)s+=7;else{var c=sr[s];if(null!=c&&c.color===t)if(c.type===$){var v=s+V[t][0];if(null==sr[v]){e(sr,n,s,v,tr.NORMAL);var v=s+V[t][1];i[t]===R(s)&&null==sr[v]&&e(sr,n,s,v,tr.BIG_PAWN)}for(g=2;4>g;g++){var v=s+V[t][g];136&v||(null!=sr[v]&&sr[v].color===o?e(sr,n,s,v,tr.CAPTURE):v===gr&&e(sr,n,s,gr,tr.EP_CAPTURE))}}else for(var g=0,E=X[c.type].length;E>g;g++)for(var b=X[c.type][g],v=s;;){if(v+=b,136&v)break;if(null!=sr[v]){if(sr[v].color===t)break;e(sr,n,s,v,tr.CAPTURE);break}if(e(sr,n,s,v,tr.NORMAL),"n"===c.type||"k"===c.type)break}}if(!a||u===pr[t]){if(vr[t]&tr.KSIDE_CASTLE){var _=pr[t],y=_+2;null!=sr[_+1]||null!=sr[y]||h(o,pr[t])||h(o,_+1)||h(o,y)||e(sr,n,pr[t],y,tr.KSIDE_CASTLE)}if(vr[t]&tr.QSIDE_CASTLE){var _=pr[t],y=_-2;null!=sr[_-1]||null!=sr[_-2]||null!=sr[_-3]||h(o,pr[t])||h(o,_-1)||h(o,y)||e(sr,n,pr[t],y,tr.QSIDE_CASTLE)}}if(!l)return n;for(var m=[],s=0,E=n.length;E>s;s++)S(n[s]),d(t)||m.push(n[s]),C();return m}function v(r,e){var n="";if(r.flags&tr.KSIDE_CASTLE)n="O-O";else if(r.flags&tr.QSIDE_CASTLE)n="O-O-O";else{var t=T(r,e);r.piece!==$&&(n+=r.piece.toUpperCase()+t),r.flags&(tr.CAPTURE|tr.EP_CAPTURE)&&(r.piece===$&&(n+=O(r.from)[0]),n+="x"),n+=O(r.to),r.flags&tr.PROMOTION&&(n+="="+r.promotion.toUpperCase())}return S(r),E()&&(n+=b()?"#":"+"),C(),n}function g(r){return r.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}function h(r,e){for(var n=ar.a8;n<=ar.h1;n++)if(136&n)n+=7;else if(null!=sr[n]&&sr[n].color===r){var t=sr[n],o=n-e,i=o+119;if(Y[i]&1<<er[t.type]){if(t.type===$){if(o>0){if(t.color===j)return!0}else if(t.color===x)return!0;continue}if("n"===t.type||"k"===t.type)return!0;for(var f=rr[i],u=n+f,a=!1;u!==e;){if(null!=sr[u]){a=!0;break}u+=f}if(!a)return!0}}return!1}function d(r){return h(k(r),pr[r])}function E(){return d(cr)}function b(){return E()&&0===c().length}function _(){return!E()&&0===c().length}function y(){for(var r={},e=[],n=0,t=0,o=ar.a8;o<=ar.h1;o++)if(t=(t+1)%2,136&o)o+=7;else{var i=sr[o];i&&(r[i.type]=i.type in r?r[i.type]+1:1,i.type===G&&e.push(t),n++)}if(2===n)return!0;if(3===n&&(1===r[G]||1===r[M]))return!0;if(n===r[G]+2){for(var f=0,u=e.length,o=0;u>o;o++)f+=e[o];if(0===f||f===u)return!0}return!1}function m(){for(var r=[],e={},n=!1;;){var t=C();if(!t)break;r.push(t)}for(;;){var o=i().split(" ").slice(0,4).join(" ");if(e[o]=o in e?e[o]+1:1,e[o]>=3&&(n=!0),!r.length)break;S(r.pop())}return n}function A(r){Er.push({move:r,kings:{b:pr.b,w:pr.w},turn:cr,castling:{b:vr.b,w:vr.w},ep_square:gr,half_moves:hr,move_number:dr})}function S(r){var e=cr,n=k(e);if(A(r),sr[r.to]=sr[r.from],sr[r.from]=null,r.flags&tr.EP_CAPTURE&&(cr===x?sr[r.to-16]=null:sr[r.to+16]=null),r.flags&tr.PROMOTION&&(sr[r.to]={type:r.promotion,color:e}),sr[r.to].type===H){if(pr[sr[r.to].color]=r.to,r.flags&tr.KSIDE_CASTLE){var t=r.to-1,o=r.to+1;sr[t]=sr[o],sr[o]=null}else if(r.flags&tr.QSIDE_CASTLE){var t=r.to+1,o=r.to-2;sr[t]=sr[o],sr[o]=null}vr[e]=""}if(vr[e])for(var i=0,f=lr[e].length;f>i;i++)if(r.from===lr[e][i].square&&vr[e]&lr[e][i].flag){vr[e]^=lr[e][i].flag;break}if(vr[n])for(var i=0,f=lr[n].length;f>i;i++)if(r.to===lr[n][i].square&&vr[n]&lr[n][i].flag){vr[n]^=lr[n][i].flag;break}gr=r.flags&tr.BIG_PAWN?"b"===cr?r.to-16:r.to+16:B,r.piece===$?hr=0:r.flags&(tr.CAPTURE|tr.EP_CAPTURE)?hr=0:hr++,cr===x&&dr++,cr=k(cr)}function C(){var r=Er.pop();if(null==r)return null;var e=r.move;pr=r.kings,cr=r.turn,vr=r.castling,gr=r.ep_square,hr=r.half_moves,dr=r.move_number;var n=cr,t=k(cr);if(sr[e.from]=sr[e.to],sr[e.from].type=e.piece,sr[e.to]=null,e.flags&tr.CAPTURE)sr[e.to]={type:e.captured,color:t};else if(e.flags&tr.EP_CAPTURE){var o;o=n===x?e.to-16:e.to+16,sr[o]={type:$,color:t}}if(e.flags&(tr.KSIDE_CASTLE|tr.QSIDE_CASTLE)){var i,f;e.flags&tr.KSIDE_CASTLE?(i=e.to+1,f=e.to-1):e.flags&tr.QSIDE_CASTLE&&(i=e.to-2,f=e.to+1),sr[i]=sr[f],sr[f]=null}return e}function T(r,e){for(var n=c({legal:!e}),t=r.from,o=r.to,i=r.piece,f=0,u=0,a=0,l=0,s=n.length;s>l;l++){var p=n[l].from,v=n[l].to,g=n[l].piece;i===g&&t!==p&&o===v&&(f++,R(t)===R(p)&&u++,N(t)===N(p)&&a++)}return f>0?u>0&&a>0?O(t):O(t).charAt(a>0?1:0):""}function I(){for(var r="   +------------------------+\n",e=ar.a8;e<=ar.h1;e++){if(0===N(e)&&(r+=" "+"87654321"[R(e)]+" |"),null==sr[e])r+=" . ";else{var n=sr[e].type,t=sr[e].color,o=t===j?n.toUpperCase():n.toLowerCase();r+=" "+o+" "}e+1&136&&(r+="|\n",e+=8)}return r+="   +------------------------+\n",r+="     a  b  c  d  e  f  g  h\n"}function P(r,e){var n=g(r);if(e){var t=n.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/);if(t)var o=t[1],i=t[2],f=t[3],u=t[4]}for(var a=c(),l=0,s=a.length;s>l;l++){if(n===g(v(a[l]))||e&&n===g(v(a[l],!0)))return a[l];if(!(!t||o&&o.toLowerCase()!=a[l].piece||ar[i]!=a[l].from||ar[f]!=a[l].to||u&&u.toLowerCase()!=a[l].promotion))return a[l]}return null}function w(r){for(var e=[],n=[],t=("undefined"!=typeof r&&"verbose"in r&&r.verbose);Er.length>0;)e.push(C());for(;e.length>0;){var o=e.pop();n.push(t?D(o):v(o)),S(o)}return n}function L(r){var e=[],n=w(r);if(!_r||_r.length<=0||n.length<=0)return e;for(var t=0;t<n.length;t++)e.push({move:n[t],clock:_r[t]});return e}function R(r){return r>>4}function N(r){return 15&r}function O(r){var e=N(r),n=R(r);return"abcdefgh".substring(e,e+1)+"87654321".substring(n,n+1)}function k(r){return r===j?x:j}function q(r){return-1!=="0123456789".indexOf(r)}function D(r){var e=K(r);e.san=v(e,!1),e.to=O(e.to),e.from=O(e.from);var n="";for(var t in tr)tr[t]&e.flags&&(n+=nr[t]);return e.flags=n,e}function K(r){var e=r instanceof Array?[]:{};for(var n in r)"object"==typeof n?e[n]=K(r[n]):e[n]=r[n];return e}function Q(r){return r.replace(/^\s+|\s+$/g,"")}function U(r){for(var e=c({legal:!1}),n=0,t=cr,o=0,i=e.length;i>o;o++){if(S(e[o]),!d(t))if(r-1>0){var f=U(r-1);n+=f}else n++;C()}return n}var x="b",j="w",B=-1,$="p",M="n",G="b",F="r",W="q",H="k",Z="pnbrqkPNBRQK",z="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",J=["1-0","0-1","1/2-1/2","*"],V={b:[16,32,17,15],w:[-16,-32,-17,-15]},X={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},Y=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],rr=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],er={p:0,n:1,b:2,r:3,q:4,k:5},nr={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},tr={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},or=7,ir=6,fr=1,ur=0,ar={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},lr={w:[{square:ar.a1,flag:tr.QSIDE_CASTLE},{square:ar.h1,flag:tr.KSIDE_CASTLE}],b:[{square:ar.a8,flag:tr.QSIDE_CASTLE},{square:ar.h8,flag:tr.KSIDE_CASTLE}]},sr=new Array(128),pr={w:B,b:B},cr=j,vr={w:0,b:0},gr=B,hr=0,dr=1,Er=[],br={},_r=[];return t("undefined"==typeof r?z:r),{WHITE:j,BLACK:x,PAWN:$,KNIGHT:M,BISHOP:G,ROOK:F,QUEEN:W,KING:H,SQUARES:function(){for(var r=[],e=ar.a8;e<=ar.h1;e++)136&e?e+=7:r.push(O(e));return r}(),FLAGS:nr,load:function(r){return t(r)},reset:function(){return n()},moves:function(r){for(var e=c(r),n=[],t=0,o=e.length;o>t;t++)n.push("undefined"!=typeof r&&"verbose"in r&&r.verbose?D(e[t]):v(e[t],!1));return n},in_check:function(){return E()},in_checkmate:function(){return b()},in_stalemate:function(){return _()},in_draw:function(){return hr>=100||_()||y()||m()},insufficient_material:function(){return y()},in_threefold_repetition:function(){return m()},game_over:function(){return hr>=100||b()||_()||y()||m()},validate_fen:function(r){return o(r)},fen:function(){return i()},board:function(){for(var r=[],e=[],n=ar.a8;n<=ar.h1;n++)e.push(null==sr[n]?null:{type:sr[n].type,color:sr[n].color}),n+1&136&&(r.push(e),e=[],n+=8);return r},pgn:function(r){var e="object"==typeof r&&"string"==typeof r.newline_char?r.newline_char:"\n",n="object"==typeof r&&"number"==typeof r.max_width?r.max_width:0,t=[],o=!1;for(var i in br)t.push("["+i+' "'+br[i]+'"]'+e),o=!0;o&&Er.length&&t.push(e);for(var f=[];Er.length>0;)f.push(C());for(var u=[],a="";f.length>0;){var l=f.pop();Er.length||"b"!==l.color?"w"===l.color&&(a.length&&u.push(a),a=dr+"."):a=dr+". ...",a=a+" "+v(l,!1),S(l)}if(a.length&&u.push(a),"undefined"!=typeof br.Result&&u.push(br.Result),0===n)return t.join("")+u.join(" ");for(var s=0,i=0;i<u.length;i++)s+u[i].length>n&&0!==i?(" "===t[t.length-1]&&t.pop(),t.push(e),s=0):0!==i&&(t.push(" "),s++),t.push(u[i]),s+=u[i].length;return t.join("")},load_pgn:function(r,e){function o(r){return r.replace(/\\/g,"\\")}function i(r){for(var e in r)return!0;return!1}function u(r,e){for(var n="object"==typeof e&&"string"==typeof e.newline_char?e.newline_char:"\r?\n",t={},i=r.split(new RegExp(o(n))),f="",u="",a=0;a<i.length;a++)f=i[a].replace(/^\[([A-Z][A-Za-z]*)\s.*\]$/,"$1"),u=i[a].replace(/^\[[A-Za-z]+\s"(.*)"\]$/,"$1"),Q(f).length>0&&(t[f]=u);return t}var a="undefined"!=typeof e&&"sloppy"in e?e.sloppy:!1,l="object"==typeof e&&"string"==typeof e.newline_char?e.newline_char:"\r?\n",s=new RegExp("^(\\[((?:"+o(l)+")|.)*\\])(?:"+o(l)+"){2}"),p=s.test(r)?s.exec(r)[1]:"";n();var c=u(p,e);for(var v in c)f([v,c[v]]);if("1"===c.SetUp&&!("FEN"in c&&t(c.FEN,!0)))return!1;var g=r.replace(p,"").replace(new RegExp(o(l),"g")," ");_r=g.match(/(\d{1,2}:)+\d{1,2}/g),g=g.replace(/(\{[^}]+\})+?/g,"");for(var h=/(\([^\(\)]+\))+?/g;h.test(g);)g=g.replace(h,"");g=g.replace(/\d+\.(\.\.)?/g,""),g=g.replace(/\.\.\./g,""),g=g.replace(/\$\d+/g,"");var d=Q(g).split(new RegExp(/\s+/));d=d.join(",").replace(/,,+/g,",").split(",");for(var E="",b=0;b<d.length-1;b++){if(E=P(d[b],a),null==E)return!1;S(E)}if(E=d[d.length-1],J.indexOf(E)>-1)i(br)&&"undefined"==typeof br.Result&&f(["Result",E]);else{if(E=P(E,a),null==E)return!1;S(E)}return!0},header:function(){return f(arguments)},ascii:function(){return I()},turn:function(){return cr},move:function(r,e){var n="undefined"!=typeof e&&"sloppy"in e?e.sloppy:!1,t=null;if("string"==typeof r)t=P(r,n);else if("object"==typeof r)for(var o=c(),i=0,f=o.length;f>i;i++)if(!(r.from!==O(o[i].from)||r.to!==O(o[i].to)||"promotion"in o[i]&&r.promotion!==o[i].promotion)){t=o[i];break}if(!t)return null;var u=D(t);return S(t),u},undo:function(){var r=C();return r?D(r):null},clear:function(){return e()},put:function(r,e){return l(r,e)},get:function(r){return a(r)},remove:function(r){return s(r)},perft:function(r){return U(r)},square_color:function(r){if(r in ar){var e=ar[r];return(R(e)+N(e))%2===0?"light":"dark"}return null},timings:function(){return _r},time_history:function(r){return L(r)},history:function(r){return w(r)}}};"undefined"!=typeof exports&&(exports.Chess=Chess),"undefined"!=typeof define&&define(function(){return Chess});
